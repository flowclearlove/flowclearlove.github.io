{
    "version": "https://jsonfeed.org/version/1",
    "title": "让风听见的blog • All posts by \"开发\" tag",
    "description": "人生不可能总是顺心如意的，但是持续朝着阳光走，影子就会躲在后面。刺眼，却表明对的方向。",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2023/05/10/nginx%E9%85%8D%E7%BD%AETCP-UDP%E8%BD%AC%E5%8F%91/",
            "url": "http://example.com/2023/05/10/nginx%E9%85%8D%E7%BD%AETCP-UDP%E8%BD%AC%E5%8F%91/",
            "title": "nginx配置TCP/UDP转发",
            "date_published": "2023-05-10T12:36:24.000Z",
            "content_html": "<h2 id=\"实现代码\"><a class=\"markdownIt-Anchor\" href=\"#实现代码\">#</a> 实现代码</h2>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs nginx\"><span class=\"hljs-section\">stream</span> &#123;<br>    <span class=\"hljs-comment\">#将12345端口转发到192.168.1.23的3306端口</span><br>    <span class=\"hljs-section\">server</span> &#123;<br>        <span class=\"hljs-attribute\">listen</span> <span class=\"hljs-number\">12345</span>;<br>        <span class=\"hljs-attribute\">proxy_connect_timeout</span> <span class=\"hljs-number\">5s</span>;<br>        <span class=\"hljs-attribute\">proxy_timeout</span> <span class=\"hljs-number\">20s</span>;<br>        <span class=\"hljs-attribute\">proxy_pass</span> <span class=\"hljs-number\">192.168.1.23:3306</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">#将udp 53端口转发到192.168.1.23 53端口</span><br>    <span class=\"hljs-section\">server</span> &#123;<br>        <span class=\"hljs-attribute\">listen</span> <span class=\"hljs-number\">53</span> udp reuseport;<br>        <span class=\"hljs-attribute\">proxy_timeout</span> <span class=\"hljs-number\">20s</span>;<br>        <span class=\"hljs-attribute\">proxy_pass</span> <span class=\"hljs-number\">192.168.1.23:53</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">#ipv4转发到ipv6</span><br>    <span class=\"hljs-section\">server</span> &#123;<br>        <span class=\"hljs-attribute\">listen</span> <span class=\"hljs-number\">9135</span>;<br>        <span class=\"hljs-attribute\">proxy_connect_timeout</span> <span class=\"hljs-number\">10s</span>;<br>        <span class=\"hljs-attribute\">proxy_timeout</span> <span class=\"hljs-number\">30s</span>;<br>        <span class=\"hljs-attribute\">proxy_pass</span> [<span class=\"hljs-number\">2607</span>:fcd0:<span class=\"hljs-number\">107</span>:3cc::<span class=\"hljs-number\">1</span>]:<span class=\"hljs-number\">9135</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"前提\"><a class=\"markdownIt-Anchor\" href=\"#前提\">#</a> 前提</h2>\n<blockquote>\n<p>版本一定要大于 1.9.1，编译的时候需要–with-stream 这个模块支持。</p>\n</blockquote>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs awk\"><span class=\"hljs-comment\">#执行下面的命令，根据提示完成安装</span><br>wget https:<span class=\"hljs-regexp\">//</span>raw.githubusercontent.com<span class=\"hljs-regexp\">/helloxz/</span>nginx-cdn<span class=\"hljs-regexp\">/master/</span>nginx.sh &amp;&amp; bash nginx.sh<br><span class=\"hljs-comment\">#安装完成后执行下面的命令让环境变量生效</span><br>source <span class=\"hljs-regexp\">/etc/</span>profile<br><span class=\"hljs-comment\">#执行下面的命令查看nginx信息</span><br>nginx -V<br></code></pre></td></tr></table></figure>\n",
            "tags": [
                "开发"
            ]
        }
    ]
}