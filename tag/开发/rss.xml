<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>让风听见 • Posts by &#34;开发&#34; tag</title>
        <link>http://example.com</link>
        <description>人生不可能总是顺心如意的，但是持续朝着阳光走，影子就会躲在后面。刺眼，却表明对的方向。</description>
        <language>zh-CN</language>
        <pubDate>Wed, 10 May 2023 20:36:24 +0800</pubDate>
        <lastBuildDate>Wed, 10 May 2023 20:36:24 +0800</lastBuildDate>
        <category>shell</category>
        <category>hexo博客</category>
        <category>开发</category>
        <category>语雀</category>
        <category>joplin</category>
        <item>
            <guid isPermalink="true">http://example.com/2023/05/10/nginx%E9%85%8D%E7%BD%AETCP-UDP%E8%BD%AC%E5%8F%91/</guid>
            <title>nginx配置TCP/UDP转发</title>
            <link>http://example.com/2023/05/10/nginx%E9%85%8D%E7%BD%AETCP-UDP%E8%BD%AC%E5%8F%91/</link>
            <category>开发</category>
            <pubDate>Wed, 10 May 2023 20:36:24 +0800</pubDate>
            <description><![CDATA[ &lt;h2 id=&#34;实现代码&#34;&gt;&lt;a href=&#34;#实现代码&#34; class=&#34;headerlink&#34; title=&#34;实现代码&#34;&gt;&lt;/a&gt;实现代码&lt;/h2&gt;&lt;figure class=&#34;highlight nginx&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs nginx&#34;&gt;&lt;span class=&#34;hljs-section&#34;&gt;stream&lt;/span&gt; &amp;#123;&lt;br&gt;    &lt;span class=&#34;hljs-comment&#34;&gt;#将12345端口转发到192.168.1.23的3306端口&lt;/span&gt;&lt;br&gt;    &lt;span class=&#34;hljs-section&#34;&gt;server&lt;/span&gt; &amp;#123;&lt;br&gt;        &lt;span class=&#34;hljs-attribute&#34;&gt;listen&lt;/span&gt; &lt;span class=&#34;hljs-number&#34;&gt;12345&lt;/span&gt;;&lt;br&gt;        &lt;span class=&#34;hljs-attribute&#34;&gt;proxy_connect_timeout&lt;/span&gt; &lt;span class=&#34;hljs-number&#34;&gt;5s&lt;/span&gt;;&lt;br&gt;        &lt;span class=&#34;hljs-attribute&#34;&gt;proxy_timeout&lt;/span&gt; &lt;span class=&#34;hljs-number&#34;&gt;20s&lt;/span&gt;;&lt;br&gt;        &lt;span class=&#34;hljs-attribute&#34;&gt;proxy_pass&lt;/span&gt; &lt;span class=&#34;hljs-number&#34;&gt;192.168.1.23:3306&lt;/span&gt;;&lt;br&gt;    &amp;#125;&lt;br&gt;    &lt;span class=&#34;hljs-comment&#34;&gt;#将udp 53端口转发到192.168.1.23 53端口&lt;/span&gt;&lt;br&gt;    &lt;span class=&#34;hljs-section&#34;&gt;server&lt;/span&gt; &amp;#123;&lt;br&gt;        &lt;span class=&#34;hljs-attribute&#34;&gt;listen&lt;/span&gt; &lt;span class=&#34;hljs-number&#34;&gt;53&lt;/span&gt; udp reuseport;&lt;br&gt;        &lt;span class=&#34;hljs-attribute&#34;&gt;proxy_timeout&lt;/span&gt; &lt;span class=&#34;hljs-number&#34;&gt;20s&lt;/span&gt;;&lt;br&gt;        &lt;span class=&#34;hljs-attribute&#34;&gt;proxy_pass&lt;/span&gt; &lt;span class=&#34;hljs-number&#34;&gt;192.168.1.23:53&lt;/span&gt;;&lt;br&gt;    &amp;#125;&lt;br&gt;    &lt;span class=&#34;hljs-comment&#34;&gt;#ipv4转发到ipv6&lt;/span&gt;&lt;br&gt;    &lt;span class=&#34;hljs-section&#34;&gt;server&lt;/span&gt; &amp;#123;&lt;br&gt;        &lt;span class=&#34;hljs-attribute&#34;&gt;listen&lt;/span&gt; &lt;span class=&#34;hljs-number&#34;&gt;9135&lt;/span&gt;;&lt;br&gt;        &lt;span class=&#34;hljs-attribute&#34;&gt;proxy_connect_timeout&lt;/span&gt; &lt;span class=&#34;hljs-number&#34;&gt;10s&lt;/span&gt;;&lt;br&gt;        &lt;span class=&#34;hljs-attribute&#34;&gt;proxy_timeout&lt;/span&gt; &lt;span class=&#34;hljs-number&#34;&gt;30s&lt;/span&gt;;&lt;br&gt;        &lt;span class=&#34;hljs-attribute&#34;&gt;proxy_pass&lt;/span&gt; [&lt;span class=&#34;hljs-number&#34;&gt;2607&lt;/span&gt;:fcd0:&lt;span class=&#34;hljs-number&#34;&gt;107&lt;/span&gt;:3cc::&lt;span class=&#34;hljs-number&#34;&gt;1&lt;/span&gt;]:&lt;span class=&#34;hljs-number&#34;&gt;9135&lt;/span&gt;;&lt;br&gt;    &amp;#125;&lt;br&gt;&amp;#125;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;前提&#34;&gt;&lt;a href=&#34;#前提&#34; class=&#34;headerlink&#34; title=&#34;前提&#34;&gt;&lt;/a&gt;前提&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;版本一定要大于1.9.1，编译的时候需要–with-stream这个模块支持。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#执行下面的命令，根据提示完成安装&lt;/span&gt;&lt;br&gt;wget https:&lt;span class=&#34;hljs-regexp&#34;&gt;//&lt;/span&gt;raw.githubusercontent.com&lt;span class=&#34;hljs-regexp&#34;&gt;/helloxz/&lt;/span&gt;nginx-cdn&lt;span class=&#34;hljs-regexp&#34;&gt;/master/&lt;/span&gt;nginx.sh &amp;amp;&amp;amp; bash nginx.sh&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#安装完成后执行下面的命令让环境变量生效&lt;/span&gt;&lt;br&gt;source &lt;span class=&#34;hljs-regexp&#34;&gt;/etc/&lt;/span&gt;profile&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#执行下面的命令查看nginx信息&lt;/span&gt;&lt;br&gt;nginx -V&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



 ]]></description>
        </item>
    </channel>
</rss>
